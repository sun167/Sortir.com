{% extends 'base.html.twig' %}

{% block title %} {{ parent() }} | Détail de la sortie{% endblock %}

{% block body %}
    <h1>Détail Sortie</h1>
    <div class="sortie-container">
        <div class="sortie-image">
            <img src="{{ asset('img/photoVisite/' ~ sortie.urlPhoto) }}" alt="{{ sortie.urlPhoto }}" width="500">
        </div>
        <div>
            <h4> Nom : {{ sortie.nom }}</h4>
            <h4> Date de début : {{ sortie.dateDebut|date('d/m/Y') }}</h4>
            <h4> Date de fin d'inscription : {{ sortie.dateFin|date('d/m/Y') }}</h4>
            <h4> Durée : {{ sortie.duree }} minutes</h4>
            <h4> Description : {{ sortie.description }}</h4>
            {% for lieu in sortie.lieu %}
                <h4> Lieu : {{ lieu.nom }}</h4>
                <h4> Rue : {{ lieu.rue }}</h4>
                {% for ville in lieu.ville %}
                    <h4> Code Postal : {{ ville.code_postal }}</h4>
                    <h4> Ville : {{ ville.nom }} minutes</h4>
                {% endfor %}
                <h4> Latitude : {{ lieu.latitude }}</h4>
                <h4> Longitude : {{ lieu.longitude }}</h4>
            {% endfor %}
            {% for campus in sortie.campus %}
                <h4> Organiser par : {{ campus.nom }}</h4>
            {% endfor %}
            {% for etat in sortie.etat %}
                <h4>Etat : {{ sortie.etat }}</h4>
            {% endfor %}
        </div>
    </div>

    <div>
        <h3>Listes des participants</h3>
        <div> Il y a <span id="nb_dispo">{{ sortie.participants|length }}</span> personnes inscrites
            sur {{ sortie.nbInscriptionsMax }}</div>
        <input type="hidden" id="sortie_id" value="{{ sortie.nom }}">
        <table>
            <thead>
            <tr>
                <th>Pseudo</th>
                <th>Nom</th>
                <th></th>
            </tr>
            </thead>
            <tbody>

            {% for participant in sortie.participants %}
                <tr>
                    <td>{{ participant.pseudo }}</td>
                    <td>{{ participant.nom ~ " " ~ participant.prenom }}</td>
                    <td>
                        <a href="{{ path('participant_detail',{id : participant.id}) }}">
                            <button class="btn btn-outline-secondary ms-3 ">Details</button>
                        </a>
                    </td>
                </tr>

            {% endfor %}
            </tbody>

        </table>

    </div>

{% endblock %}